#!/bin/bash

# This bash script build FontForge

source buildScripts/reSourceVersionEnvs

echo ""
echo "-------------------------------------------------------------------"
echo "BUILDING FontForge (using CMake)"
echo "-------------------------------------------------------------------"
echo ""

cd fontforge

mkdir build

cd build

cmake        		                        \
  -DCMAKE_BUILD_TYPE=Release                \
  -DBUILD_SHARED_LIBS:BOOL=OFF              \
  -DCMAKE_INSTALL_PREFIX=$PDF2HTMLEX_PREFIX \
  -DENABLE_GUI:BOOL=OFF                     \
  -DENABLE_X11:BOOL=OFF                     \
  -DENABLE_PYTHON_SCRIPTING:BOOL=OFF        \
  -DENABLE_PYTHON_EXTENSION:AUTO=OFF        \
  ..

# Apply any patches required for fontforge raw sources before we make
#
#for APATCHFILE in $(ls ../patches/fontforge-$FONTFORGE_VERSION-*)
#do
#  echo "patching fontforge using [$APATCHFILE]" 
#  patch -p 1 < $APATCHFILE
#done

make $MAKE_PARALLEL

