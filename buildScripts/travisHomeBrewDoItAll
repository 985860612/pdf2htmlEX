#!/bin/bash

# This bash script builds everyting on an TravisCI Mac OSx worker

# See:
# https://docs.travis-ci.com/user/installing-dependencies/#using-homebrew-without-addon-on-older-macos-images
# For details on obtaining/using the correct ruby version for homebrew.

set -ev

export UNATTENDED="--assume-yes"
export MAKE_PARALLEL="-j $(nproc)"

export PDF2HTMLEX_BRANCH="$(git rev-parse --abbrev-ref HEAD)"

./buildScripts/versionEnvs
./buildScripts/reportEnvs
./buildScripts/getBuildToolsHomeBrew
./buildScripts/getDevLibrariesBrew
./buildScripts/getPoppler
./buildScripts/buildPoppler
./buildScripts/getFontforge
./buildScripts/buildFontforge
./buildScripts/buildPdf2htmlEX
./buildScripts/installPdf2htmlEX
#./buildScripts/createAppImage
#./buildScripts/createDockerImage
#./buildScripts/uploadGitHubRelease
#./buildScripts/uploadDockerImage
